<!DOCTYPE html>
<html  lang=en>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  
    
    <link rel="shortcut icon" href="/images/favicon.ico ">
    
    
    <link rel="icon" type="image/png" href="/images/favicon-android.png " sizes="192x192">
    
    
    <link rel="apple-touch-icon" href="/images/favicon-apple.png " sizes="180x180">
    
  
  <!-- title -->
  <title>Yu Peng blog C/C++ 中 `static` 关键字 </title>
  <!-- styles -->
  <!-- styles -->

<link rel="stylesheet" href="/styles/global.css">

  <!-- rss -->
  
<meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <header id="header">
  
  <nav class="menu menu--right">
  
    <a class="menu__item" href="/">主页</a>
    <a class="menu__item" href="/archives/">归档</a>
    <a class="menu__item" href="/categories/">专题</a>
    <a class="menu__item" href="/tags/">标签</a>
    <a class="menu__item" href="/works/">作品</a>
    <a class="menu__item" href="/about/">关于</a>
  </nav>
</header>
    <main>
      <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post__header">
  <h1 class="post__title">C/C++ 中 `static` 关键字</h1>
  
  
  <div class="post__meta">
    
<time class="post__date" datetime="2025-08-20T09:35:01.000Z" itemprop="datePublished">
  
  <i class="blogfont">&#xedff;</i>
  
  2025-08-20 17:35:01
</time>

    
<div class="post__category">
  <i class="blogfont">&#xe62d;</i>
  <a class="category-link" href="/categories/c-cpp/">c/cpp</a>
</div>
  

    
<div class="post__tag">
  <i class="blogfont">&#xe7ec;</i>
  <a class="tag-link-link" href="/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" rel="tag">编程语言</a>
</div>


    <div id="/2025/08/20/c-cpp/c-cpp-static/index/" class="leancloud_visitors post__stat" data-flag-title="C/C++ 中 `static` 关键字">
  <i class="blogfont">&#xe672;</i>
  <span class="leancloud-visitors-count">loading...</span>
</div>
  </div>
</header>
  <aside class="post__aside">
  <div class="post__actions">
    <a id="backTop" class="post__top" href="javascript:">
      <i class="blogfont">&#xe6b1;</i><!-- Top -->
    </a>
    <a id="share" class="post__share" href="javascript:">
      <i class="blogfont">&#xe6c1;</i>
    </a>
  </div>
  <ol class="post__toc"><li class="post__toc-item post__toc-level-1"><a class="post__toc-link" href="#C-x2F-C-%E4%B8%AD-static-%E5%85%B3%E9%94%AE%E5%AD%97%E8%AF%A6%E8%A7%A3"><span class="post__toc-text">C&#x2F;C++ 中 static 关键字详解</span></a><ol class="post__toc-child"><li class="post__toc-item post__toc-level-2"><a class="post__toc-link" href="#1-static-%E4%BF%AE%E9%A5%B0%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="post__toc-text">1. static 修饰全局变量</span></a><ol class="post__toc-child"><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="post__toc-text">示例</span></a></li><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#%E7%89%B9%E7%82%B9"><span class="post__toc-text">特点</span></a></li><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#%E5%AF%B9%E6%AF%94%E6%99%AE%E9%80%9A%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="post__toc-text">对比普通全局变量</span></a></li></ol></li><li class="post__toc-item post__toc-level-2"><a class="post__toc-link" href="#2-static-%E4%BF%AE%E9%A5%B0%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="post__toc-text">2. static 修饰局部变量</span></a><ol class="post__toc-child"><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="post__toc-text">示例</span></a></li><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#%E7%89%B9%E7%82%B9-1"><span class="post__toc-text">特点</span></a></li></ol></li><li class="post__toc-item post__toc-level-2"><a class="post__toc-link" href="#3-static-%E4%BF%AE%E9%A5%B0%E5%87%BD%E6%95%B0"><span class="post__toc-text">3. static 修饰函数</span></a><ol class="post__toc-child"><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="post__toc-text">示例</span></a></li><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#%E7%89%B9%E7%82%B9-2"><span class="post__toc-text">特点</span></a></li></ol></li><li class="post__toc-item post__toc-level-2"><a class="post__toc-link" href="#4-C-%E4%B8%AD-static-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="post__toc-text">4. C++ 中 static 的使用</span></a><ol class="post__toc-child"><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#4-1-%E7%B1%BB%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F"><span class="post__toc-text">4.1 类静态成员变量</span></a></li><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#4-2-%E7%B1%BB%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="post__toc-text">4.2 类静态成员函数</span></a></li><li class="post__toc-item post__toc-level-3"><a class="post__toc-link" href="#4-3-%E5%8C%BF%E5%90%8D%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E6%9B%BF%E4%BB%A3-static%EF%BC%88C-%E7%89%B9%E6%9C%89%EF%BC%89"><span class="post__toc-text">4.3 匿名命名空间替代 static（C++ 特有）</span></a></li></ol></li><li class="post__toc-item post__toc-level-2"><a class="post__toc-link" href="#5-%E6%80%BB%E7%BB%93"><span class="post__toc-text">5. 总结</span></a></li></ol></li></ol>
</aside>
  <div class="post__content" itemprop="articleBody">
    <h1 id="C-x2F-C-中-static-关键字详解"><a href="#C-x2F-C-中-static-关键字详解" class="headerlink" title="C&#x2F;C++ 中 static 关键字详解"></a>C&#x2F;C++ 中 <code>static</code> 关键字详解</h1><p><code>static</code> 是 C&#x2F;C++ 中一个非常重要的关键字，用途灵活。它既可以修饰全局变量，也可以修饰局部变量和函数。在 C++ 中还可以修饰类成员变量和成员函数。本文将从不同角度详细讲解 <code>static</code> 的作用、生命周期和使用场景。</p>
<hr>
<h2 id="1-static-修饰全局变量"><a href="#1-static-修饰全局变量" class="headerlink" title="1. static 修饰全局变量"></a>1. <code>static</code> 修饰全局变量</h2><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">int</span> counter = <span class="number">0</span>; <span class="comment">// 仅当前文件可见</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">    counter++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;counter = %d\n&quot;</span>, counter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    add(); <span class="comment">// counter = 1</span></span><br><span class="line">    add(); <span class="comment">// counter = 2</span></span><br><span class="line">    add(); <span class="comment">// counter = 3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li><strong>生命周期</strong>：和普通全局变量一样，从程序开始到程序结束。</li>
<li><strong>作用域</strong>：仅在当前源文件可见，无法通过 <code>extern</code> 在其他文件访问。</li>
<li><strong>多次访问</strong>：变量值会一直保留，不会因为函数调用结束而销毁。</li>
</ul>
<h3 id="对比普通全局变量"><a href="#对比普通全局变量" class="headerlink" title="对比普通全局变量"></a>对比普通全局变量</h3><table>
<thead>
<tr>
<th>特性</th>
<th>普通全局变量</th>
<th><code>static</code> 全局变量</th>
</tr>
</thead>
<tbody><tr>
<td>生命周期</td>
<td>整个程序运行期间</td>
<td>整个程序运行期间</td>
</tr>
<tr>
<td>作用域</td>
<td>跨文件可见</td>
<td>当前文件可见</td>
</tr>
<tr>
<td>初始化次数</td>
<td>程序启动时一次</td>
<td>程序启动时一次</td>
</tr>
<tr>
<td>多次访问效果</td>
<td>同一份存储空间，值累积</td>
<td>同一份存储空间，值累积</td>
</tr>
</tbody></table>
<blockquote>
<p>使用 <code>static</code> 修饰全局变量可以避免命名冲突，增强封装性。</p>
</blockquote>
<hr>
<h2 id="2-static-修饰局部变量"><a href="#2-static-修饰局部变量" class="headerlink" title="2. static 修饰局部变量"></a>2. <code>static</code> 修饰局部变量</h2><h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">demo</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> count = <span class="number">0</span>; <span class="comment">// 局部静态变量</span></span><br><span class="line">    count++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;count = %d\n&quot;</span>, count);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    demo(); <span class="comment">// count = 1</span></span><br><span class="line">    demo(); <span class="comment">// count = 2</span></span><br><span class="line">    demo(); <span class="comment">// count = 3</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><ul>
<li><strong>生命周期</strong>：从程序开始到程序结束，与全局变量一样。</li>
<li><strong>作用域</strong>：仅在定义的函数内部可见。</li>
<li><strong>多次访问</strong>：每次调用函数时，变量不会重新初始化，保留上一次的值。</li>
</ul>
<hr>
<h2 id="3-static-修饰函数"><a href="#3-static-修饰函数" class="headerlink" title="3. static 修饰函数"></a>3. <code>static</code> 修饰函数</h2><h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello, static function!\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    hello();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h3><ul>
<li><strong>作用域</strong>：仅在定义的源文件内部可见，无法在其他文件中调用。</li>
<li><strong>用途</strong>：限制函数的访问范围，防止命名冲突。</li>
</ul>
<hr>
<h2 id="4-C-中-static-的使用"><a href="#4-C-中-static-的使用" class="headerlink" title="4. C++ 中 static 的使用"></a>4. C++ 中 <code>static</code> 的使用</h2><h3 id="4-1-类静态成员变量"><a href="#4-1-类静态成员变量" class="headerlink" title="4.1 类静态成员变量"></a>4.1 类静态成员变量</h3><ul>
<li><strong>作用</strong>：类共享的变量，不属于某个对象实例。</li>
<li><strong>访问方式</strong>：通过类名或对象实例访问。</li>
<li><strong>存储期</strong>：静态存储期。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> count;  <span class="comment">// 声明</span></span><br><span class="line">    <span class="built_in">MyClass</span>() &#123; count++; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> MyClass::count = <span class="number">0</span>; <span class="comment">// 定义并初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass a;</span><br><span class="line">    MyClass b;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Count: &quot;</span> &lt;&lt; MyClass::count &lt;&lt; endl;  <span class="comment">// Count: 2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-类静态成员函数"><a href="#4-2-类静态成员函数" class="headerlink" title="4.2 类静态成员函数"></a>4.2 类静态成员函数</h3><ul>
<li><strong>作用</strong>：静态函数只能访问静态成员变量，不能访问非静态成员。</li>
<li><strong>调用方式</strong>：通过类名或对象调用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">printCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Count: &quot;</span> &lt;&lt; count &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> count;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> MyClass::count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass::count = <span class="number">10</span>;</span><br><span class="line">    MyClass::<span class="built_in">printCount</span>();  <span class="comment">// 输出 10</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-匿名命名空间替代-static（C-特有）"><a href="#4-3-匿名命名空间替代-static（C-特有）" class="headerlink" title="4.3 匿名命名空间替代 static（C++ 特有）"></a>4.3 匿名命名空间替代 <code>static</code>（C++ 特有）</h3><p>在 C++ 中，<code>static</code> 修饰全局函数和变量可以被匿名命名空间替代：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    <span class="type">int</span> counter = <span class="number">0</span>;      <span class="comment">// 等效 static int counter;</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">helper</span><span class="params">()</span> </span>&#123;&#125;      <span class="comment">// 等效 static void helper();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>匿名命名空间是 C++ 推荐的做法，比 <code>static</code> 更语义化。</p>
</blockquote>
<hr>
<h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5. 总结"></a>5. 总结</h2><table>
<thead>
<tr>
<th>使用场景</th>
<th>生命周期</th>
<th>作用域</th>
<th>特点</th>
</tr>
</thead>
<tbody><tr>
<td>全局变量 static</td>
<td>程序运行期</td>
<td>文件内部</td>
<td>限制文件可见性</td>
</tr>
<tr>
<td>局部变量 static</td>
<td>程序运行期</td>
<td>函数内部</td>
<td>保留函数调用间的值</td>
</tr>
<tr>
<td>函数 static</td>
<td>程序运行期</td>
<td>文件内部</td>
<td>文件内可见，不被其他文件引用</td>
</tr>
<tr>
<td>类静态成员变量</td>
<td>程序运行期</td>
<td>类作用域</td>
<td>所有对象共享</td>
</tr>
<tr>
<td>类静态成员函数</td>
<td>程序运行期</td>
<td>类作用域</td>
<td>仅能访问静态成员</td>
</tr>
</tbody></table>

  </div>
  </br>
  </br>
  
  <section id="comments" class="comments">
    <div class="valine-comment"></div>
<!--载入js，在</body>之前插入即可-->
<!--Leancloud 操作库:-->
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<!--Valine 的核心代码库-->
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
new Valine({
    el: '.valine-comment',
    app_id: 'aVoW8Ns48PCL9aWpyaraklyz-gzGzoHsz',
    app_key: '5OofdgauZeSJ0SPHIgbbQ6fe',
    placeholder: '',
    visitor: 'true',
  })
</script>
  </section>
  
</article>
    </main>
    <footer id="footer">
  Copyright &copy;
  2023
  Yu Peng
  
  
    <a class="social-links" target="_blank" rel="noopener" href="https://github.com/yuhua2000"><i class="blogfont"><img src="https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/github.svg" alt="GitHub" width="16" height="16"> </i></a>
  
    <a class="social-links" target="_blank" rel="noopener" href="https://leetcode.cn/u/yu-peng-f"><i class="blogfont"><img src="https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/leetcode.svg" alt="LeetCode" width="16" height="16"> </i></a>
  
    <a class="social-links" href="mailto:2651034096@qq.com"><i class="blogfont"><img src="https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/gmail.svg" alt="Mail" width="16" height="16"> </i></a>
  
  
</footer>
    <!-- scripts -->

<script src="/scripts/main.js"></script>

  </body>
</html>